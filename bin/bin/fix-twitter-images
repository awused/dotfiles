#! /usr/bin/env zsh
# Removes the jfif extension from twitter images
# and other corruptions I've seen.

# Each mmv/zmv is another directory traversal taking ~1 second
# This could be more efficient but this is simpler

autoload zmv
alias mmv='noglob zmv -W'

local root='/storage/media/users/desuwa/'

cd "$root"

# Ignore failures
[[ $(mmv $@ "**/*.* orig.jfif" **/*.*) ]] && true
[[ $(mmv $@ "**/*.* orig.jpg" **/*.*) ]] && true
[[ $(mmv $@ **/*%20orig **/*) ]] && true
[[ $(mmv $@ **/*.jfif **/*.jpg) ]] && true

